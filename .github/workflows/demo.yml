# -----------------------------
# Name of the GitHub Actions workflow
# This will show up in the Actions tab
# -----------------------------
name: ci-cd-pipeline

# -----------------------------
# Events that trigger this workflow
# -----------------------------
on:
  push:
    branches: [ main ]      # Run when code is pushed to main
  pull_request:
    branches: [ main ]      # Run when a PR targets main

# -----------------------------
# Jobs section defines separate execution units
# Each job runs on its own virtual machine (runner)
# -----------------------------
jobs:

  # ============================
  # ðŸ›  BUILD JOB
  # ============================
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install dependencies
        run: npm install

      - name: Run tests
        run: npm test

      - name: Build artifact
        run: npm run build

  # ============================
  # ðŸš€ DEPLOY JOB
  # ============================
  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - name: Deploy to AWS
        run: echo "AWS Deploy Script Here"
